<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tic Tac Toe - The Hexas</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Setup Required Modal -->
    <div id="config-modal">
        <h2>‚ö†Ô∏è SETUP REQUIRED ‚ö†Ô∏è</h2>
        <p>You have not configured the game yet.</p>
        <p>1. Go to <a href="https://console.firebase.google.com/" target="_blank" style="color:#4f46e5;">Firebase Console</a><br>
        2. Project Settings ‚Üí General ‚Üí Your Apps ‚Üí SDK Setup<br>
        3. Copy the "const firebaseConfig = {...}" block.<br>
        4. Edit <b>config/firebase.js</b> and update the configuration.</p>
        <p>The game will not run without this API Key.</p>
    </div>

    <!-- Theme Toggle -->
    <div class="theme-toggle-container">
        <button id="theme-toggle">üåô</button>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Name Entry View -->
        <div id="view-name" class="card">
            <h2>Enter Your Name</h2>
            <input type="text" id="name-input" placeholder="Your Name" maxlength="20">
            <button class="btn-primary" onclick="setPlayerName()">Continue</button>
        </div>

        <!-- Main Menu View -->
        <div id="view-menu" class="card hidden">
            <h1>Tic Tac Toe</h1>
            <p class="subtitle">www.thehexas.com</p>
            <button class="btn-primary" onclick="createRoom()">Create Room</button>
            <button class="btn-secondary" onclick="switchView('join')">Join Room</button>
            <div id="room-list-container">
                <h2>Available Rooms</h2>
                <div id="room-list">
                    <!-- Room list will be populated here -->
                </div>
            </div>
        </div>

        <!-- Join Room View -->
        <div id="view-join" class="card hidden">
            <h2>Join Game</h2>
            <p class="subtitle">Enter the room code</p>
            <input type="text" id="join-code-input" placeholder="XXX-XX-XXX" maxlength="11">
            <div id="join-error" class="error"></div>
            <button class="btn-primary" onclick="joinRoom()">Join</button>
            <button class="btn-secondary" onclick="switchView('menu')">Back</button>
        </div>

        <!-- Lobby View -->
        <div id="view-lobby" class="card hidden">
            <h2>Room Created</h2>
            <div class="code-display" id="lobby-code">...</div>
            <p class="subtitle">Share this code with your friend</p>
            <div class="status-badge">Waiting for opponent...</div>
            <button class="btn-secondary" onclick="location.reload()">Cancel</button>
        </div>

        <!-- Game View -->
        <div id="view-game" class="card hidden">
            <div id="game-status" class="status-badge">Connecting...</div>
            <div class="board" id="board"></div>
            <div class="player-indicators">
                <span id="p1-indicator">Player 1 (X)</span>
                <span id="p2-indicator">Player 2 (O)</span>
            </div>
            <div class="player-scores">
                <span id="p1-score">0</span>
                <span id="p2-score">0</span>
            </div>
            <div id="game-controls" class="game-controls hidden">
                <button class="btn-danger" onclick="resetGame()">Play Again</button>
                <button class="btn-secondary" onclick="leaveGame()">Leave Game</button>
                <p id="rematch-status"></p>
            </div>
            <div class="room-info">Room: <span id="game-room-code"></span></div>
        </div>

        <!-- Debug Log (hidden by default) -->
        <div id="debug-log">
            <div class="log-entry">System initializing...</div>
        </div>
    </div>

    <!-- Load JavaScript Application -->
    <script type="module" src="js/app.js"></script>
</body>
</html>